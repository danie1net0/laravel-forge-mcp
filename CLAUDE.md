# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Laravel 12 application using PHP 8.2+ with a SQLite database by default. The application includes Laravel Telescope for debugging and monitoring, and uses Vite with Tailwind CSS 4 for frontend asset compilation.

## Development Commands

### Initial Setup
```bash
composer setup
```
This runs the complete setup: installs dependencies, creates .env from .env.example, generates app key, runs migrations, installs npm packages, and builds assets.

### Running the Development Server
```bash
composer dev
```
This starts all development services concurrently (server, queue worker, log monitoring, and Vite). It uses concurrently to run:
- `php artisan serve` - Web server on http://localhost:8000
- `php artisan queue:listen` - Queue worker
- `php artisan pail` - Real-time log viewer
- `npm run dev` - Vite dev server with HMR

Alternatively, start services individually:
```bash
php artisan serve                  # Start web server only
php artisan queue:listen           # Start queue worker
php artisan pail                   # View logs
npm run dev                        # Start Vite dev server
```

### Testing
```bash
composer test                      # Run all tests
php artisan test                   # Run tests directly
php artisan test --filter TestName # Run specific test
```

Tests use SQLite in-memory database and have Telescope disabled for performance.

### Code Quality
```bash
./vendor/bin/pint                  # Fix code style (Laravel Pint)
./vendor/bin/pint --test           # Check code style without fixing
```

### Asset Building
```bash
npm run build                      # Build production assets
npm run dev                        # Start Vite dev server
```

### Database Operations
```bash
php artisan migrate                # Run migrations
php artisan migrate:fresh          # Drop all tables and re-run migrations
php artisan migrate:fresh --seed   # Fresh migration with seeders
php artisan db:seed                # Run database seeders
```

### Laravel Telescope
Access Telescope at `/telescope` when the application is running. Telescope monitors:
- Requests, queries, models, jobs, events, logs
- Cache operations, Redis commands, client requests
- Exceptions, gates, notifications, mail

Configure Telescope behavior in `config/telescope.php` or via environment variables (TELESCOPE_*).

## Architecture

### Application Bootstrap
The application uses Laravel 12's streamlined bootstrap process in `bootstrap/app.php`:
- Routes defined in `routes/web.php` and `routes/console.php`
- Health check endpoint at `/up`
- Middleware and exception handling configured via fluent API

### Directory Structure
- `app/Http/Controllers/` - HTTP controllers
- `app/Models/` - Eloquent models
- `app/Providers/` - Service providers (AppServiceProvider, TelescopeServiceProvider)
- `database/migrations/` - Database migrations
- `database/factories/` - Model factories
- `database/seeders/` - Database seeders
- `resources/views/` - Blade templates
- `resources/css/` and `resources/js/` - Frontend assets
- `routes/` - Route definitions
- `tests/Feature/` and `tests/Unit/` - PHPUnit tests

### Database
Default configuration uses SQLite (`database/database.sqlite`). Connection can be changed via `DB_CONNECTION` environment variable. Supports MySQL, PostgreSQL, and SQL Server.

### Queue and Cache
- Queue driver: `database` (configurable via `QUEUE_CONNECTION`)
- Cache driver: `database` (configurable via `CACHE_STORE`)
- Session driver: `database`

### Frontend Stack
- Vite 7 for asset bundling
- Tailwind CSS 4 with Vite plugin
- Laravel Vite plugin for integration
- Entry points: `resources/css/app.css` and `resources/js/app.js`

## Environment Configuration

Copy `.env.example` to `.env` and configure:
- `APP_KEY` - Generated by `php artisan key:generate`
- `DB_CONNECTION` - Default is `sqlite`
- `TELESCOPE_ENABLED` - Enable/disable Telescope (default: true)
- Queue, cache, session, and mail settings as needed

## Artisan Console

Common artisan commands:
```bash
php artisan list                   # List all commands
php artisan tinker                 # REPL for Laravel
php artisan make:controller Name   # Create controller
php artisan make:model Name -m     # Create model with migration
php artisan make:migration name    # Create migration
php artisan make:factory Name      # Create factory
php artisan make:seeder Name       # Create seeder
php artisan route:list             # List all routes
php artisan config:clear           # Clear config cache
php artisan cache:clear            # Clear application cache
```
## Git Commit Guidelines

**IMPORTANT**: DO NOT add Claude Code credits or "Generated with Claude" messages to commits.

Follow the CMC (Conventional Message Commit) standard in Portuguese:

### Structure
```
<tipo>(<escopo>): <mensagem>
```

### Commit Types
- `feat`: Nova funcionalidade
- `fix`: Correção de bug
- `docs`: Alterações na documentação
- `style`: Formatação (não inclui alterações de código)
- `refactor`: Refatoração de código
- `test`: Adição ou correção de testes
- `chore`: Alterações em arquivos de configuração, tarefas de build, etc.
- `perf`: Melhorias de performance
- `ci`: Alterações em configurações de CI
- `build`: Alterações no sistema de build ou dependências externas
- `revert`: Reversão de um commit anterior

### Scope (optional)
Indica a parte do código alterada: módulo, componente ou arquivo.
Exemplos: `auth`, `dashboard`, `usuario`, `api`

### Message Rules
- Escrita em português
- Use verbos no imperativo (adiciona, corrige, implementa)
- Seja específico e conciso
- Limite a 50 caracteres se possível
- Não use ponto final

### Examples
```
feat(auth): adiciona autenticação com Google
fix(carrinho): corrige cálculo de desconto
docs: atualiza instruções de instalação
refactor(usuario): simplifica validação de formulário
test(api): adiciona testes para rotas de pagamento
chore: atualiza dependências de desenvolvimento
perf(consulta): otimiza query do banco de dados
```
